# Linux 中的重定向和管道



[TOC]

## 1 基本概念

在Linux中，每一个应用程序运行时都需要三样设备和用户进行交互：

1. 从键盘接受用户的输入。

2. 通过显示器输出要告诉用户的信息。

3. 程序出现错误时，从一个专门用于错误输出的显示设备输出错误信息。

   这三样设备就称为**标准输入输出设备**。在Linux中，每一个硬件设备都被抽象为一个文件，这三个标准设备设备分别对应如下表的文件。

   | 标准设备名称 |   文件名    |
   | :----------: | :---------: |
   |     键盘     | /dev/stdin  |
   |    显示器    | /dev/stdout |
   | 错误输出设备 | /dev/stderr |

   第三个设备你可能觉的有些奇怪。可以这样理解：

   > 每一个应用程序最少需要用键盘来输入，用显示器来输出结果。但当遇到程序错误的时候，这个信息不好意思让用户看到，只需要给程序员看，所以当然需要一个不同的设备。但实际上，因为系统只有一个显示器，所以错误输出设备和显示器经常设为同一个设备。

   

正因为每一个设备都是一个文件，那我们当然可以用普通文件（**相对于设备文件**）来代替每个程序的标准设备文件，把这样的操作，就称为重定向。因为有有三种设备，所以就有三种重定向。

## 2 三种重定向

### 2.1 输出重定向

```
$> ls > temp.txt
```

可以看出，符号`>`表示把ls程序的输出设备由`stdin`换成了文件`temp.txt`，这就是重定向。文件`temp.txt如果不存在，则会自动创建。结果就是`ls的输出不会出现在屏幕上了，而是被放进文件`temp.txt`中了。你可以形象地理解为：

> 符号 > 表示程序的输出本来该显示在屏幕上，现在一个一个地流到文件中去了。注意这个符号的方向。所以又称为**输出重定向**.

### 2.2 输入重定向

### 2.3 错误重定向

## 3 管道

管道（**pipeline**），是将两个（或多个）应用程序前后相接，前者的输出设备作为后者的输入设备，即前一个应用程序的所有输出信息（本来该显示在屏幕上），作为下一个应用程序的输入信息（本来要用键盘），从而形成以给信息的处理串，形象地称之为管道。

看一个例子就明白了。

```
$> ls | 
```

